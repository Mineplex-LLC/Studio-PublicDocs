---
title: Step-by-Step Explanation of Initial Classes
description: Plain English guide to setting up and understanding the DragonsPlugin and DragonsGame classes
---

Follow along with us by checking out the ðŸ”— [source code](https://github.com/BillyDotWS/studioexample-dragons)

### DragonsPlugin
The `DragonsPlugin` class is the main entry point for the plugin. It sets up key modules and configurations for the "Dragons" game on the Mineplex platform. Below is a step-by-step breakdown of what each part does and how to set it up:

ðŸ”— [DragonsPlugin class source code](https://github.com/BillyDotWS/studioexample-dragons/blob/master/src/main/java/com/mineplex/studio/dragons/DragonsPlugin.java)

<Step>

    <StepItem title="Logging Initialization">
        - The `@Slf4j` annotation enables logging functionality.
        - Logs are added for important plugin actions, such as startup.

        ```java
        @Slf4j
        public class DragonsPlugin extends JavaPlugin {

            @Override
            public void onEnable() {
                DragonsPlugin.log.info("Starting plugin!");
                // Initialization steps go here
            }

            @Override
            public void onDisable() {
                this.lobbyModule.teardown();
                this.gameModule.teardown();
            }
        }
        ```
    </StepItem>

    <StepItem title="onEnable Method: Log the Plugin Start">
        - Logs a message indicating the plugin has started.

        ```java
        DragonsPlugin.log.info("Starting plugin!");
        ```
    </StepItem>

    <StepItem title="Add Translation Support">
        - Fetch the Translations module and load available translations.
        - Loop through each locale and add translations.

        **We'll implement some translations in a further page!**

        ```java
        final I18NModule i18NModule = MineplexModuleManager.getRegisteredModule(I18NModule.class);
        final String baseName = "i18n.Dragons";
        for (final Locale locale : i18NModule.getAvailableLocales()) {
            final ResourceBundle bundle = ResourceBundle.getBundle(baseName, locale, UTF8ResourceBundleControl.get());
            i18NModule.addTranslation(locale, bundle, true);
        }
        ```
    </StepItem>

    <StepItem title="Load the Lobby World">
        - Fetch the `MineplexWorldModule`.
        - Load a world template (stored in `world-templates/lobby.zip`).

        ðŸ”— [You can find our Lobby world in the example project](https://github.com/BillyDotWS/StudioExample-Dragons/tree/master/assets/world-templates)

        ðŸ”— [View more information about world loading](../../docs/sdk/features/world)

        ```java
        final MineplexWorldModule mineplexWorldModule =
            MineplexModuleManager.getRegisteredModule(MineplexWorldModule.class);

        final MineplexWorld lobby = mineplexWorldModule.createMineplexWorld(
            MineplexWorldConfig.builder()
                    .worldCreationConfig(WorldCreationConfig.builder()
                            .worldTemplate("lobby")
                            .build())
                    .build(),
            null);
        ```
    </StepItem>

    <StepItem title="Set up the Lobby module">
        First, we'll need to add a new field to our class:
        ```java
        private LobbyModule lobbyModule;
        ```

        This will allow us to have basic Lobby handling 
        
        ðŸ”— [See more information on our Lobby Module](http://docs.mineplex.com/docs/sdk/features/lobby)

        - Retrieve and configure the `LobbyModule`.
        - Set the active lobby using the created `MineplexWorld` and finalize setup.

        ```java
        this.lobbyModule = MineplexModuleManager.getRegisteredModule(LobbyModule.class);
        this.lobbyModule.setActiveLobby(this.lobbyModule.createBasicLobby(lobby));
        this.lobbyModule.setup();
        ```
    </StepItem>

    <StepItem title="Configure the Game Cycle">

        First, we'll need to add a field that stores our Game Module:
        ```java
        @Getter
        private MineplexGameModule gameModule;
        ```

        This allows us to manage our Game: think of it as a game manager.

        - Fetch the `MineplexGameModule`.
        - Define the `GameCycle` and start the game.

        ðŸ”— [View more information about the Game cycle system](../../docs/sdk/features/game#game-cycle)

        ```java
        this.gameModule = MineplexModuleManager.getRegisteredModule(MineplexGameModule.class);
        this.gameModule.setGameCycle(new GameCycle() {

            private int gameCounter = 0;

            @Override
            public MineplexGame createNextGame() {
                this.gameCounter++;
                return new DragonsGame(DragonsPlugin.this);
            }

            @Override
            public boolean hasNextGame() {
                return this.gameCounter <= 5;
            }
        });

        this.gameModule.startNextGame();
        ```
    </StepItem>
</Step>

### DragonsGame

The `DragonsGame` class represents a single instance of the "Dragons" game. It handles game-specific logic and player states. Here is how it works:

ðŸ”— [DragonsPlugin class source code](https://github.com/BillyDotWS/studioexample-dragons/blob/master/src/main/java/com/mineplex/studio/dragons/game/DragonsGame.java)

<Step>
    <StepItem title="Fields and Dependencies">
        - **Game State Tracker**: Tracks the current state of the game, such as `PREPARING`.
        - **Player State Tracker**: Keeps track of each player's state, e.g., `ALIVE`.
        - **Game Mechanic Factory**: A reference to create game-specific mechanics.
        - **Plugin Reference**: Stores a reference to `DragonsPlugin` for shared resources.

        ```java
        @Getter
        @RequiredArgsConstructor
        public class DragonsGame implements MineplexGame {

            private final GameStateTracker gameStateTracker = new GameStateTracker(this, BuiltInGameState.PREPARING);
            private final PlayerStateTracker playerStateTracker = new PlayerStateTracker(this, BuiltInPlayerState.ALIVE);
            private final MineplexGameMechanicFactory gameMechanicFactory =
                    MineplexModuleManager.getRegisteredModule(MineplexGameMechanicFactory.class);

            private final DragonsPlugin dragonsPlugin;

            @Override
            public @NonNull String getName() {
                return "Dragons";
            }

            @Override
            public @NonNull GameState getGameState() {
                return this.gameStateTracker.getGameState();
            }

            @Override
            public void setGameState(@NonNull GameState gameState) {
                this.gameStateTracker.setGameState(gameState);
            }

            @Override
            public @NonNull PlayerState getPlayerState(@NonNull Player player) {
                return playerStateTracker.getPlayerState(player);
            }

            @Override
            public void setup() {
                // register the game as an event listener
                dragonsPlugin.getServer().getPluginManager().registerEvents(this, dragonsPlugin);

                // done preparing, allow players in!
                this.setGameState(BuiltInGameState.PRE_START);
            }

            @Override
            public void teardown() {
                // stop listening to events in this class
                HandlerList.unregisterAll(this);
            }
        }
        ```
    </StepItem>
</Step>
